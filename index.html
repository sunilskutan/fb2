<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="description" content="Normal Talking Calculator">
<meta name="author" content="Sunil.S">
<meta name="version" content="1.3">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sunil.S</title>
<style>
//input { width:100%;  height:100%; box-sizing:border-box;  display: block;  padding: 0; }
input[type="text"]{ width:320px;  height:50px; box-sizing:border-box; padding: 0;}
input[type="button"]{ width:75px;  height:50px; box-sizing:border-box; padding: 0; }
//input{ width:100%;  height:50px; box-sizing:border-box; padding: 0;}
tr{ height:50px; }
td {
    width: fit-content;
    padding: 1px; /* Add some padding for better spacing */
}
input[type="button"] {
  font-family: Calibri, sans-serif;
  font-size: 20px;
  font-weight: bold;
  color: darkgreen;
}
input[type="text"] {
  font-family: Calibri, sans-serif;
  font-size: 25px;
  font-weight: bold;
  color: darkgreen;
}
h4 {
  font-family: Calibri, sans-serif;
  font-size: 20px;
  font-weight: bold;
  color: darkgreen; 
}

.container {
    display: flex;
    justify-content: center; /* Horizontally center the child element */
    align-items: center; /* Vertically center the child element */
    height: 100vh; /* Adjust as needed */
}

.aligned-paragraphs {
    display: flex;
}
.aligned-paragraphs p {
    margin: 0; /* Remove default margins */
}

 .small1 {
        border: 3px solid blue;
        font-color: blue; 
        font-weight: bold; 
        padding: 5px;
        border-radius: 5px; 
    }
.small2 {
        border: 3px solid red;
        font-color: red; 
        font-weight: bold; 
        padding: 5px;
        border-radius: 5px; 
    }

#memory1,#memory2{ width:125px;  height:20px; font-size: 17px; font-weight:normal; }

</style>
<script>


var op1,op2,res,fl,flag=0,flag2=0,s=1,symb; //global variables

function operate(opr) {
	op1=0.0;
   	op1=parseFloat(document.getElementById('display').value);
   	symb=opr.value; 
	switch(symb) {
      		case '+': speak('add'); break;
      		case '×': speak('multiply'); break;
      		case '⁻': speak('subtract'); break;
      		case '÷': speak('divide'); break;
    	}
   	fl=0;
}

function speak(text) { if(s){var msg = new SpeechSynthesisUtterance(text); window.speechSynthesis.speak(msg); }}

function dis(num) { if(fl){document.getElementById('display').value+=num.value; speak(num.value);}
                    else {document.getElementById('display').value="";
                          document.getElementById('display').value=num.value; speak(num.value); fl=1; }              
                  }

function calculate() { 
	op2=0.0;
    	op2 = parseFloat(document.getElementById('display').value);
	switch(symb) {
      		case '+': res = op1 + op2; break;
      		case '×': res = op1 * op2; break;
      		case '⁻': res = op1 - op2; break;
      		case '÷': if (op2 != 0) { res = op1 / op2; } else { res = "Cannot divide by zero"; } break;
      		default: res= "Invalid operator";
    	}
	document.getElementById('display').value = res;
     	speak('answer'); speak(res); 
    	fl=0;
}

function per() { 
	op2=0.0;
    	op2 = parseFloat(document.getElementById('display').value);
     	if(symb=='÷'){res=op1/op2*100.0;}	
	else if(symb=='×'){res=op1*op2/100.0;}
    	document.getElementById('display').value = res;
    	speak('answer'); speak(res); speak('percentage'); 
    	fl=0;
}

function cl() {  document.getElementById('display').value =""; speak('all cleared'); }

function bs() {  document.getElementById('display').value = document.getElementById('display').value.slice(0, -1); speak('back space');}

function showParagraph() {
    	var checkbox = document.getElementById("checkbox");
    	var paragraph = document.getElementById("sci");
    	if (checkbox.checked) {
      		paragraph.style.display = "block";
    	} 
	else {
      		paragraph.style.display = "none";
    	}
}

function manageMemory(mem){
	var memo1=document.getElementById("mem1");
	var memo2=document.getElementById("mem2");
	var me1=document.getElementById("memory1");
	var me2=document.getElementById("memory2");
 	switch(mem.value) {
      		case 'M1': if((flag==0) && (document.getElementById('display').value !=="")) {memo1.style.display = "block"; me1.value=document.getElementById('display').value; fl=0; flag=1; speak("first memory is stored with");speak(me1.value);} 
			   else{ memo1.style.display = "none"; me1.value=""; flag=0;speak("first memory cleared");} break;
      		case 'M2': if((flag2==0) && (document.getElementById('display').value !=="")){memo2.style.display = "block"; me2.value=document.getElementById('display').value; fl=0; flag2=1;speak("second memory is stored with");speak(me2.value);} 
			   else{ memo2.style.display = "none"; me2.value=""; flag2=0;speak("second memory cleared");} break;
     		case 'MR1': document.getElementById('display').value=me1.value; fl=0; speak("first memory value retrieved ");speak(me1.value); break;
      		case 'MR2': document.getElementById('display').value=me2.value; fl=0; speak("second memory value retrieved ");speak(me2.value);break;
    	}
}

function talk(){
	var box = document.getElementById("talk");
	if (box.checked) {
      		s=1;
    	} 
	else {
     		s=0;
    	}
}
function work() {
	var note = document.getElementById("note");	
	var fPage = document.getElementById("fullPage");
	note.style.display = "none";
	fPage.style.display = "block";
}
function notWork() {
	var note1 = document.getElementById("note");	
	var fPage1 = document.getElementById("fullPage");
	note1.style.display = "block";
	fPage1.style.display = "none";
}
function permanentBlock() {
	var note2 = document.getElementById("note");	
	var fPage2 = document.getElementById("fullPage");
	note2.style.display = "none";
	fPage2.style.display = "none";
        //alert("Maximum number of free usage crossed. To continue using send Rs.10 only to 9446266822 with your Phone number");
        promptInput = prompt("Maximum number of free usage crossed. To continue using send Rs.10 only to 9446266822  with your Phone number in the Message Box");
	if(promptInput=='niranjana') { localStorage.setItem('pageOpenCounter', '0'); }
}
var  pageOpenCount;
var startCount=5;
var endCount=500;
var promptInput;
function countViews() {

let userAgent = navigator.userAgent || navigator.vendor || window.opera;

    // Detect Facebook in-app browser
    if (userAgent.includes("FBAN") || userAgent.includes("FBAV")) {
        // Redirect to Chrome (Android only)
        window.location.href = "googlechrome://" + window.location.href.replace("https://", "").replace("http://", "");
    }





	// Check if the counter is already stored in localStorage
if(localStorage.getItem('pageOpenCounter') === null) {
    // If not, initialize the counter to 0
    localStorage.setItem('pageOpenCounter', '0');
}

// Get the current counter value from localStorage and convert it to a number
 pageOpenCount = parseInt(localStorage.getItem('pageOpenCounter'));

// Increment the counter
pageOpenCount++;

// Update the counter in localStorage
localStorage.setItem('pageOpenCounter', pageOpenCount.toString());

// Display the counter value on the webpage
document.getElementById('counted').textContent = "This Calculator has been used " + pageOpenCount + " times.";
if(pageOpenCount>=startCount && pageOpenCount<=endCount){work();}
else if(pageOpenCount>endCount){permanentBlock();}
else {notWork();}

}


</script>
</head>
<body onload="countViews()">
<div id="note"><p align=left style="font-size:10px;">ഈ കാൽക്കുലേറ്റർ ഉപയോഗിക്കേണ്ട വിധം <br>⦿ കാൽക്കുലേറ്റർ Silent ആവാന്‍  Talk ടിക്ക് മാറ്റുക <br>⦿ M1/M2 ക്ലിക്ക് ചെയ്താൽ ഡിസ്പ്ലേ വാല്യൂ അതാത് മെമ്മറിയിൽ സ്റ്റോർ ആവും 
<br>⦿ M1/M2  വീണ്ടും ക്ലിക്ക്  ചെയ്താൽ മെമ്മറി റീസെറ്റ് ആവും <br>⦿ MR1/MR2 ക്ലിക്ക്  ചെയ്താൽ മെമ്മറി വാല്യൂ തിരിച്ചെടുക്കാം.</p><br><button  id="close" onclick="work()"> Close </button> </div>
<div id="fullPage" >
<center ><h4>Calculator</h4> </center> <p align="right" style="font-size:10px;"><input type="checkbox" id="talk" name="talkbox" onchange="talk()" checked>Talk</p>

  <div class="aligned-paragraphs"  >
 <p  id="mem1" style="display:none;" >M1 <input type="text" id="memory1" style="text-align:right;" class="small1" > </p>
 <p  id="mem2" style="display:none;"  > &nbsp;&nbsp;&nbsp;M2 <input type="text" id="memory2" style="text-align:right;"class="small2" > </p>
 </div> 
<br>
  <table border=1 align=center >
  <tr><td colspan=4><input type="text" id="display" style="text-align:right; background-color:white;" disabled> </td></tr>
 <tr><td ><input type="button" id="bM1" value="M1" onclick="manageMemory(this)"></td> <td ><input type="button" id="b0" value="M2" onclick="manageMemory(this)"></td>
      <td ><input type="button" id="b." value="MR1" onclick="manageMemory(this)"></td> <td ><input type="button" id="b=" value="MR2" onclick="manageMemory(this)"></td> </tr>
 
 <tr><td ><input type="button" id="bac" value="AC" onclick="cl()" ></td> <td ><input type="button" id="b%" value="%" onclick="per()" ></td>
      <td ><input type="button" id="b<-" value="←" onclick="bs()" ></td> <td ><input type="button" id="bd" value="÷" onclick="operate(this)" ></td> </tr>

  <tr><td ><input type="button" id="b7" value="7" onclick="dis(this)"></td> <td ><input type="button" id="b8" value="8" onclick="dis(this)"></td>
      <td ><input type="button" id="b9" value="9" onclick="dis(this)"></td> <td ><input type="button" id="bm" value="×" onclick="operate(this)" ></td> </tr>

  <tr><td ><input type="button" id="b4" value="4" onclick="dis(this)"></td> <td ><input type="button" id="b5" value="5" onclick="dis(this)"></td>
      <td ><input type="button" id="b6" value="6" onclick="dis(this)"></td> <td ><input type="button" id="bs" value="⁻" onclick="operate(this)"></td> </tr>

 <tr><td ><input type="button" id="b1" value="1" onclick="dis(this)"></td> <td ><input type="button" id="b2" value="2" onclick="dis(this)"></td>
      <td ><input type="button" id="b3" value="3" onclick="dis(this)"></td> <td ><input type="button" id="ba" value="+" onclick="operate(this)"></td> </tr>


 <tr><td ><input type="button" id="b00" value="00" onclick="dis(this)"></td> <td ><input type="button" id="b0" value="0" onclick="dis(this)"></td>
      <td ><input type="button" id="b." value="." onclick="dis(this)"></td> <td ><input type="button" id="b=" value="=" onclick="calculate()"></td> </tr>

 </table>


<br><br><br><br><br><br><br><br><br><br><br><br><br>
<p id="counted" align="center" style="font-size:8px;"></p>
<center><a href="https://www.facebook.com/sunilskutan" target="_blank" rel="noopener noreferrer"> <img src="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABgESAAMAAAABAAEAAAMBAAUAAAABAAAAVgMDAAEAAAABAAAAAFEQAAEAAAABAQAAAFERAAQAAAABAAAOxFESAAQAAAABAAAOxAAAAAAAAYagAACxj//bAEMAAgEBAgEBAgICAgICAgIDBQMDAwMDBgQEAwUHBgcHBwYHBwgJCwkICAoIBwcKDQoKCwwMDAwHCQ4PDQwOCwwMDP/bAEMBAgICAwMDBgMDBgwIBwgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDP/AABEIABEADQMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APXPEPxUtbb4m+INL8ReLNP8O3PhzV79dNsor+Ox32lrJIqzSIWBlBjTznLbkXeRwFGPMvD/AMYLPxba3N7fXVvq0z3k4S/ikEsd9Dv3QyArxkxsoYg7SykgKCFHoH7WHgDxdoHizUrrTr6TSrPXdUudQTUbPSIdQmZZBkwkTAiMhmOSFYOqrypJZfXP2ZvA+i638FNFvry30rVb68WR7y5Sy8hGuVdo5kSNixRUkRkC7mA25BYHcfm4ZbCnOVCg0rfl03Sb0fdvufo2WZ5SwdGGLrQclJWtZJ363evVP1vobP7RH/IDs/8Aro//ALTq58Bv+ST6L/1wP/ob0UV1U/8Aen6fqfOVv+RZH/G/yP/Z "></center>
</a> 
</div>

 </body>
</html>
